package guiAuthoring;


import java.io.BufferedReader;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.Scanner;

public class CreationBuilder {

	public void buildCreation(String name) throws IOException{
		
		String draw="drawtext=\"fontfile= ./creation/TibetanMachineUni.ttf:text='pleaseend':fontcolor=black:fontsize=56: x=(w-text_w)/2: y=(h-text_h)/2\"";
		
		String fuck="ffmpeg -nostats -f lavfi -i color=color=red "
				+ "-vf drawtext=:text='"+name+"':fontcolor=black:fontsize=56\""
				+ " -t 3 -s 320x240 killme.mp4";
		
		String[] smart=fuck.split("\\s");
		
		for (int i=0;i<smart.length;i++) {
			System.out.println(smart[i]);
		}
		
		

		String[] command={"ffmpeg" ,"-nostats", "-f", "lavfi", "-i", "color=color=blue",								
				"-t", "3", "-s", "320x240", name+".mp4"};
		//this probably needs to be backgrounded also needs to be fixed to actually display text

		ProcessBuilder builder=new ProcessBuilder();

		builder.redirectErrorStream(true);
		builder.command(smart);
		builder.directory(new File("./creations"));

		Process process=builder.start();
		
		
		//Bottom part is debugging
		BufferedReader reader = 
				new BufferedReader(new InputStreamReader(process.getInputStream()));
		StringBuilder strbuilder = new StringBuilder();
		String line = null;
		while ( (line = reader.readLine()) != null) {
			strbuilder.append(line);
			strbuilder.append(System.getProperty("line.separator"));
		}
		String result = strbuilder.toString();
		
		System.out.println(result);

	}	

}
